% generated by Ott 0.28 from: /home/joey/UBC/539B/project/GTFL.ott
% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 5 - 17
\documentclass[11pt]{article}
\usepackage{amsmath,amssymb}
\usepackage{supertabular}
\usepackage{geometry}
\usepackage{ifthen}
\usepackage{pdflscape}
\usepackage{alltt}%hack
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}
\usepackage{color}
\usepackage{mathpartir}


\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 5 - 17
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \mathit{x} ,\, \mathit{y} ,\, \mathit{z} ,\, \mathit{c} $ & \ottcom{Symbols from some infinite set} \\
 $ i $ & \ottcom{Indices (ott artifact, please ignore)} \\
}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 46 - 53
\newcommand{\ottn}{
\ottrulehead{\ottnt{n}}{::=}{\ottcom{Natural Numbers}}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{n_{{\mathrm{1}}}}  \black{+}  \ottnt{n_{{\mathrm{2}}}} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{ DYN } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{BOOL } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{NAT } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{ARROW } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{PRODUCT } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{0}} {\textsf{M}}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 55 - 57
\newcommand{\ottb}{
\ottrulehead{b}{::=}{\ottcom{Booleans}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{true}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{false}}{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 60 - 87
\newcommand{\otte}{
\ottrulehead{\source{e}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \blue{ \mathit{x} } }{}{}{}{\ottcom{Variables}}\ottprodnewline
\ottprodline{|}{ \blue{ b } }{}{}{}{\ottcom{Booleans}}\ottprodnewline
\ottprodline{|}{ \blue{ \ottnt{n} } }{}{}{}{\ottcom{Natural Numbers}}\ottprodnewline
\ottprodline{|}{ \blue{\lambda  \mathit{x} }  \ldotp  \source{e} }{}{}{}{\ottcom{Functions}}\ottprodnewline
\ottprodline{|}{ \source{e}_{{\mathrm{1}}} \  \source{e}_{{\mathrm{2}}} }{}{}{}{\ottcom{Function Application}}\ottprodnewline
\ottprodline{|}{ \source{e}_{{\mathrm{1}}}  \blue{\boldsymbol{+} }  \source{e}_{{\mathrm{2}}} }{}{}{}{\ottcom{Addition}}\ottprodnewline
\ottprodline{|}{ \source{e}_{{\mathrm{1}}}  \blue{\stackrel{?}{=} }  \source{e}_{{\mathrm{2}}} }{}{}{}{\ottcom{Number Equality Test}}\ottprodnewline
\ottprodline{|}{ \blue{\ottkw{if} }\  \source{e}_{{\mathrm{1}}} \ \blue{\ottkw{then} }\  \source{e}_{{\mathrm{2}}} \ \blue{\ottkw{else} }\  \source{e}_{{\mathrm{3}}} }{}{}{}{\ottcom{Conditionals}}\ottprodnewline
\ottprodline{|}{ \blue{\langle}  \source{e}_{{\mathrm{1}}}  \blue{,}  \source{e}_{{\mathrm{2}}}  \blue{\rangle} }{}{}{}{\ottcom{Tuples}}\ottprodnewline
\ottprodline{|}{ \blue{ \pi_1 }  \source{e} }{}{}{}{\ottcom{Tuple First Projection}}\ottprodnewline
\ottprodline{|}{ \blue{ \pi_2 }  \source{e} }{}{}{}{\ottcom{Tuple Second Projection}}\ottprodnewline
\ottprodline{|}{ \blue{ \pi_{ i } }  \source{e} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \source{e} _\black{ i } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\source{ep} \, \source{e}}{}{}{}{\ottcom{Evidence Ascription}}\ottprodnewline
\ottprodline{|}{ \blue{ \ottkw{error} } }{}{}{}{\ottcom{Runtime Type Error}}\ottprodnewline
\ottprodline{|}{ \blue{(}  \source{e}  \blue{)} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \black{[}  \source{e}_{{\mathrm{1}}}  \black{/}  \mathit{x}  \black{]}  \source{e}_{{\mathrm{2}}} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{C}  \ottsym{[}  \source{e}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{eval} \, \ottsym{(}  \source{e}  \ottsym{)}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{120}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{5}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{4}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{3}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{2}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{0}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{1}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\source{e} \, \source{e}_{{\mathrm{1}}} \, ... \, \source{e}_{\ottmv{i}}} {\textsf{M}}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 91 - 93
\newcommand{\ottO}{
\ottrulehead{\ottnt{O}}{::=}{\ottcom{Observable values}}\ottprodnewline
\ottfirstprodline{|}{ \blue{ b } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \blue{ \ottnt{n} } }{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 95 - 99
\newcommand{\ottr}{
\ottrulehead{\source{r}}{::=}{\ottcom{Raw Irreducable (closed) terms}}\ottprodnewline
\ottfirstprodline{|}{ \blue{ b } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \blue{ \ottnt{n} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \blue{\lambda  \mathit{x} }  \ldotp  \source{e} }{}{}{}{\ottcom{Functions}}\ottprodnewline
\ottprodline{|}{ \blue{\langle}  \source{v}_{{\mathrm{1}}}  \blue{,}  \source{v}_{{\mathrm{2}}}  \blue{\rangle} }{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 102 - 107
\newcommand{\ottv}{
\ottrulehead{\source{v}}{::=}{\ottcom{Irreducable (closed) terms}}\ottprodnewline
\ottfirstprodline{|}{\source{ep} \, \source{r}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \blue{ b } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \blue{ \ottnt{n} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \blue{\lambda  \mathit{x} }  \ldotp  \source{e} }{}{}{}{\ottcom{Functions}}\ottprodnewline
\ottprodline{|}{ \blue{\langle}  \source{v}_{{\mathrm{1}}}  \blue{,}  \source{v}_{{\mathrm{2}}}  \blue{\rangle} }{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 110 - 118
\newcommand{\ottep}{
\ottrulehead{\source{ep}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \{  \source{T}  \} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{ep}_{{\mathrm{1}}}  \sqcap  \source{ep}_{{\mathrm{2}}}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{dom} \, \source{ep}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{cod} \, \source{ep}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{Prod1}  \source{ep}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{Prod2}  \source{ep}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{Proj}_{ i }  \source{ep} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \source{ep}  \ottsym{)}} {\textsf{M}}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 120 - 137
\newcommand{\ottT}{
\ottrulehead{\source{T}}{::=}{\ottcom{Types}}\ottprodnewline
\ottfirstprodline{|}{ \blue{\mathsf{Nat} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \blue{\mathsf{Bool} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \source{T}_{{\mathrm{1}}} \blue{\to} \source{T}_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \source{T}_{{\mathrm{1}}} \blue{\times} \source{T}_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \blue{?} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \blue{( } \source{T}  \blue{)} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \source{T} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{dom} \, \source{T}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{cod} \, \source{T}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{Prod1}  \source{T}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{Prod2}  \source{T}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{Proj}_{ i }  \source{T} } {\textsf{M}}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 139 - 141
\newcommand{\ottGamma}{
\ottrulehead{\blue{\Gamma}}{::=}{\ottcom{Environments}}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{\blue{\Gamma}  \ottsym{,}  \ottsym{(}  \mathit{x}  \ottsym{:}  \source{T}  \ottsym{)}}{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 143 - 155
\newcommand{\ottC}{
\ottrulehead{\ottnt{C}}{::=}{\ottcom{Context Frames}}\ottprodnewline
\ottfirstprodline{|}{\square \, \source{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{v} \, \square}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(} \, \square \, \ottsym{,}  \source{e}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \source{v}  \ottsym{,} \, \square \, \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\pi_1 \, \square}{}{}{}{}\ottprodnewline
\ottprodline{|}{\pi_2 \, \square}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{ep} \, \square}{}{}{}{}\ottprodnewline
\ottprodline{|}{\square \, \ottsym{+}  \source{e}_{{\mathrm{1}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{v}  \ottsym{+} \, \square}{}{}{}{}\ottprodnewline
\ottprodline{|}{\square \, \stackrel{?}{=}  \source{e}_{{\mathrm{1}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{v}  \stackrel{?}{=} \, \square}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \square \, \ottkw{then} \, \source{e}_{{\mathrm{1}}} \, \ottkw{else} \, \source{e}_{{\mathrm{2}}}}{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 158 - 174
\newcommand{\ottu}{
\ottrulehead{\Ltarget{u}  ,\ \Ltarget{k}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{x}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{n}}{}{}{}{}\ottprodnewline
\ottprodline{|}{b}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{fix} \, \mathit{x} \, \Ltarget{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \red{\lambda  \red{\mathrm{x}_\black{1} }\ldots \red{\mathrm{x}_\black{i} } }\ldotp  \ottnt{t} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \langle  \Ltarget{u}_{{\mathrm{1}}} ,  \Ltarget{u}_{{\mathrm{2}}} \rangle }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \Ltarget{u}  \ottsym{)}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{MEET } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{DOM } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{COD } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{PROD}_1 } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{PROD}_2 } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathtt{PROD}_{ i } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathcal{T}\llbracket  \source{ep}  \rrbracket } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathcal{V}\llbracket  \source{v}  \rrbracket } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ [  \Ltarget{u}  /  \mathit{x}  ]  \Ltarget{u}' } {\textsf{M}}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 176 - 177
\newcommand{\ottvars}{
\ottrulehead{\red{\mathrm{x}_\black{1} }\ldots \red{\mathrm{x}_\black{i} }}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{x_{{\mathrm{1}}}} \, .. \, \mathit{x_{\ottmv{i}}}}{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 179 - 185
\newcommand{\ottd}{
\ottrulehead{\ottnt{d}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{x}  \ottsym{:=}  \Ltarget{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{:=}  \pi_1  \Ltarget{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{:=}  \pi_2  \Ltarget{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{:=}  \Ltarget{u}_{{\mathrm{1}}}  \ottsym{+}  \Ltarget{u}_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{:=}  \Ltarget{u}_{{\mathrm{1}}}  \stackrel{?}{=}  \Ltarget{u}_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathit{x}  := \pi_{ i }\  \Ltarget{u} } {\textsf{M}}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 188 - 204
\newcommand{\ottt}{
\ottrulehead{\ottnt{t}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\source{v}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottnt{d} \, \ottkw{in} \, \ottnt{t}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Ltarget{u} ( \ottnt{arg} ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{ if }\  \Ltarget{u} \ \ottkw{ then }\  \ottnt{t_{{\mathrm{1}}}} \ \ottkw{ else }\  \ottnt{t_{{\mathrm{2}}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{halt} \, \ottsym{[}  \Ltarget{u}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{error}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{t}  \ottsym{)}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathcal{E}\llbracket  \source{e}  \rrbracket  \Ltarget{k} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ [  \Ltarget{u}  /  \mathit{x}  ]  \ottnt{t} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \\ } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \\  \ottnt{t} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \qquad  \ottnt{t} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{  } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{ if }\  \Ltarget{u} \ \ottkw{ then }\  \ottnt{t_{{\mathrm{1}}}} \ } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{ else }\  \ottnt{t} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ldots } {\textsf{M}}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 206 - 207
\newcommand{\ottarg}{
\ottrulehead{\ottnt{arg}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Ltarget{u}_{{\mathrm{1}}}  \ottsym{,} \, ... \, \ottsym{,}  \Ltarget{u}_{\ottmv{i}}}{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 210 - 231
\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \longrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ {\longrightarrow^{*} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \neq }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \pi }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \cong }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \sqcap }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{dom} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{cod} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{Proj}_1 }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{Proj}_2 }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \in }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \stackrel{?}{=} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \pi_1 }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \pi_2 }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ldotp }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \llbracket }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \rrbracket }{}{}{}{}\ottprodnewline
\ottprodline{|}{ = }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \square }{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 234 - 244
\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{e}_{{\mathrm{1}}}  \neq  \source{e}_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \mathit{x}  \ottsym{:}  \source{T}  \ottsym{)} \, \in \, \blue{\Gamma}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{ep} \, \ottkw{undefined}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{T}_{{\mathrm{1}}}  =  \source{T}_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{i \, \in \, \ottsym{\{}  \ottsym{1}  \ottsym{,}  \ottsym{2}  \ottsym{\}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{c} \, \ottkw{fresh}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Ltarget{k}  \ottsym{:=}  \Ltarget{k}'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{t}  \ottsym{:=}  \ottnt{t'}}{}{}{}{}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 261 - 354
\newcommand{\ottSemantics}{
\ottrulehead{\ottnt{Semantics}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\source{e}_{{\mathrm{1}}}  \longrightarrow  \source{e}_{{\mathrm{2}}}}{}{}{}{\ottcom{Reduction Relation on terms}}}


% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 355 - 553
\newcommand{\ottTypes}{
\ottrulehead{\ottnt{Types}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\blue{\Gamma}  \vdash  \source{e}  \ottsym{:}  \source{T}}{}{}{}{\ottcom{Typability relation}}\ottprodnewline
\ottprodline{|}{\source{ep}  \vdash  \source{T}_{{\mathrm{1}}}  \cong  \source{T}_{{\mathrm{2}}}}{}{}{}{\ottcom{Type Consistency relative to Evidence}}\ottprodnewline
\ottprodline{|}{ \source{T}_{{\mathrm{1}}}  \sqcap  \source{T}_{{\mathrm{2}}}  =  \source{T}_{{\mathrm{3}}} }{}{}{}{\ottcom{Precision Meet}}\ottprodnewline
\ottprodline{|}{ \mathcal{V}\llbracket  \source{v}  \rrbracket =  \Ltarget{u} }{}{}{}{\ottcom{CPS Translation of Closed Values}}\ottprodnewline
\ottprodline{|}{ \mathcal{E}\llbracket  \source{e}  \rrbracket  \Ltarget{k}  =  \ottnt{t} }{}{}{}{\ottcom{CPS Translation of Expressions}}\ottprodnewline
\ottprodline{|}{ \mathcal{T}\llbracket  \source{ep}  \rrbracket =  \Ltarget{u} }{}{}{}{\ottcom{CPS Representation of Runtime Evidence}}\ottprodnewline
\ottprodline{|}{\ottnt{t_{{\mathrm{1}}}}  {\longrightarrow^{*} }  \ottnt{t_{{\mathrm{2}}}}}{}{}{}{}}


% #source 
\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{Semantics}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Types}}{}{}{}{}}


% #source 
\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{x}}{}{}{}{}\ottprodnewline
\ottprodline{|}{i}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{n}}{}{}{}{}\ottprodnewline
\ottprodline{|}{b}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{O}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{r}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{v}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{ep}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\source{T}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\blue{\Gamma}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{C}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Ltarget{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\red{\mathrm{x}_\black{1} }\ldots \red{\mathrm{x}_\black{i} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{d}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{t}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{arg}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottn\ottinterrule
\ottb\ottinterrule
\otte\ottinterrule
\ottO\ottinterrule
\ottr\ottinterrule
\ottv\ottinterrule
\ottep\ottinterrule
\ottT\ottinterrule
\ottGamma\ottinterrule
\ottC\ottinterrule
\ottu\ottinterrule
\ottvars\ottinterrule
\ottd\ottinterrule
\ottt\ottinterrule
\ottarg\ottinterrule
\ottterminals\ottinterrule
\ottformula\ottinterrule
\ottSemantics\ottinterrule
\ottTypes\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns Semantics
%% defn Red

% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 267 - 269
\newcommand{\ottdruleRedIfTrue}[1]{\ottdrule[#1]{%
}{
 \blue{\ottkw{if} }\   \blue{ \ottkw{true} }  \ \blue{\ottkw{then} }\  \source{e}_{{\mathrm{1}}} \ \blue{\ottkw{else} }\  \source{e}_{{\mathrm{2}}}   \longrightarrow  \source{e}_{{\mathrm{1}}}}{%
{\ottdrulename{RedIfTrue}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 270 - 272
\newcommand{\ottdruleRedIfFalse}[1]{\ottdrule[#1]{%
}{
 \blue{\ottkw{if} }\   \blue{ \ottkw{false} }  \ \blue{\ottkw{then} }\  \source{e}_{{\mathrm{1}}} \ \blue{\ottkw{else} }\  \source{e}_{{\mathrm{2}}}   \longrightarrow  \source{e}_{{\mathrm{2}}}}{%
{\ottdrulename{RedIfFalse}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 273 - 276
\newcommand{\ottdruleRedIfEv}[1]{\ottdrule[#1]{%
\ottpremise{ \blue{\ottkw{if} }\   \blue{ b }  \ \blue{\ottkw{then} }\  \source{e}_{{\mathrm{1}}} \ \blue{\ottkw{else} }\  \source{e}_{{\mathrm{2}}}   \longrightarrow  \source{e}}%
}{
 \blue{\ottkw{if} }\  \source{ep} \,  \blue{ b }  \ \blue{\ottkw{then} }\  \source{e}_{{\mathrm{1}}} \ \blue{\ottkw{else} }\  \source{e}_{{\mathrm{2}}}   \longrightarrow  \source{e}}{%
{\ottdrulename{RedIfEv}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 277 - 279
\newcommand{\ottdruleRedApp}[1]{\ottdrule[#1]{%
}{
 \blue{(}   \blue{\lambda  \mathit{x} }  \ldotp  \source{e}   \blue{)}  \, \source{v}  \longrightarrow   \black{[}  \source{v}  \black{/}  \mathit{x}  \black{]}  \source{e} }{%
{\ottdrulename{RedApp}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 280 - 282
\newcommand{\ottdruleRedAppEv}[1]{\ottdrule[#1]{%
}{
 \blue{(}  \source{ep}_{{\mathrm{1}}} \,  \blue{(}   \blue{\lambda  \mathit{x} }  \ldotp  \source{e}   \blue{)}   \blue{)}  \,  \blue{(}  \source{ep}_{{\mathrm{2}}} \, \source{r}  \blue{)}   \longrightarrow  \ottsym{(}  \ottkw{cod} \, \source{ep}_{{\mathrm{2}}}  \ottsym{)} \,  \blue{(}   \black{[}  \ottsym{(}  \ottkw{dom} \, \source{ep}_{{\mathrm{1}}}  \sqcap  \source{ep}_{{\mathrm{2}}}  \ottsym{)} \, \source{r}  \black{/}  \mathit{x}  \black{]}  \source{e}   \blue{)} }{%
{\ottdrulename{RedAppEv}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 283 - 286
\newcommand{\ottdruleRedAppEvFail}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{dom} \, \source{ep}_{{\mathrm{1}}}  \sqcap  \source{ep}_{{\mathrm{2}}} \, \ottkw{undefined}}%
}{
 \blue{(}  \source{ep}_{{\mathrm{1}}} \,  \blue{(}   \blue{\lambda  \mathit{x} }  \ldotp  \source{e}   \blue{)}   \blue{)}  \,  \blue{(}  \source{ep}_{{\mathrm{2}}} \, \source{r}  \blue{)}   \longrightarrow   \blue{ \ottkw{error} } }{%
{\ottdrulename{RedAppEvFail}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 287 - 289
\newcommand{\ottdruleRedAppEvPartial}[1]{\ottdrule[#1]{%
}{
 \blue{(}  \source{ep} \,  \blue{(}   \blue{\lambda  \mathit{x} }  \ldotp  \source{e}_{{\mathrm{1}}}   \blue{)}   \blue{)}  \, \source{r}  \longrightarrow  \ottsym{(}  \ottkw{cod} \, \source{ep}  \ottsym{)} \,  \blue{(}   \black{[}  \ottsym{(}  \ottkw{dom} \, \source{ep}  \ottsym{)} \, \source{e}_{{\mathrm{2}}}  \black{/}  \mathit{x}  \black{]}  \source{e}_{{\mathrm{1}}}   \blue{)} }{%
{\ottdrulename{RedAppEvPartial}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 290 - 293
\newcommand{\ottdruleRedAppEvPartialFail}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{dom} \, \source{ep} \, \ottkw{undefined}}%
}{
 \blue{(}  \source{ep} \,  \blue{(}   \blue{\lambda  \mathit{x} }  \ldotp  \source{e}_{{\mathrm{1}}}   \blue{)}   \blue{)}  \, \source{v}  \longrightarrow   \blue{ \ottkw{error} } }{%
{\ottdrulename{RedAppEvPartialFail}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 294 - 296
\newcommand{\ottdruleRedPlus}[1]{\ottdrule[#1]{%
}{
  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{\boldsymbol{+} }   \blue{ \ottnt{n_{{\mathrm{2}}}} }    \longrightarrow   \blue{  \ottnt{n_{{\mathrm{1}}}}  \black{+}  \ottnt{n_{{\mathrm{2}}}}  } }{%
{\ottdrulename{RedPlus}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 297 - 300
\newcommand{\ottdruleRedPlusEvL}[1]{\ottdrule[#1]{%
\ottpremise{  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{\boldsymbol{+} }  \source{v}   \longrightarrow  \source{e}}%
}{
  \blue{(}  \source{ep} \,  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{)}   \blue{\boldsymbol{+} }  \source{v}   \longrightarrow  \source{e}}{%
{\ottdrulename{RedPlusEvL}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 301 - 304
\newcommand{\ottdruleRedPlusEvR}[1]{\ottdrule[#1]{%
\ottpremise{  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{\boldsymbol{+} }   \blue{ \ottnt{n_{{\mathrm{2}}}} }    \longrightarrow  \source{e}}%
}{
  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{\boldsymbol{+} }  \source{ep} \,  \blue{ \ottnt{n_{{\mathrm{2}}}} }    \longrightarrow  \source{e}}{%
{\ottdrulename{RedPlusEvR}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 305 - 307
\newcommand{\ottdruleRedEqT}[1]{\ottdrule[#1]{%
}{
  \blue{ \ottnt{n} }   \blue{\stackrel{?}{=} }   \blue{ \ottnt{n} }    \longrightarrow   \blue{ \ottkw{true} } }{%
{\ottdrulename{RedEqT}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 308 - 311
\newcommand{\ottdruleRedEqF}[1]{\ottdrule[#1]{%
\ottpremise{ \blue{ \ottnt{n_{{\mathrm{1}}}} }   \neq   \blue{ \ottnt{n_{{\mathrm{2}}}} } }%
}{
  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{\stackrel{?}{=} }   \blue{ \ottnt{n_{{\mathrm{2}}}} }    \longrightarrow   \blue{ \ottkw{false} } }{%
{\ottdrulename{RedEqF}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 312 - 315
\newcommand{\ottdruleRedEqEvL}[1]{\ottdrule[#1]{%
\ottpremise{  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{\stackrel{?}{=} }  \source{v}   \longrightarrow  \source{e}}%
}{
  \blue{(}  \source{ep} \,  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{)}   \blue{\stackrel{?}{=} }  \source{v}   \longrightarrow  \source{e}}{%
{\ottdrulename{RedEqEvL}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 316 - 319
\newcommand{\ottdruleRedEqEvR}[1]{\ottdrule[#1]{%
\ottpremise{  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{\stackrel{?}{=} }   \blue{ \ottnt{n_{{\mathrm{2}}}} }    \longrightarrow  \source{e}}%
}{
  \blue{ \ottnt{n_{{\mathrm{1}}}} }   \blue{\stackrel{?}{=} }  \source{ep} \,  \blue{ \ottnt{n_{{\mathrm{2}}}} }    \longrightarrow  \source{e}}{%
{\ottdrulename{RedEqEvR}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 321 - 324
\newcommand{\ottdruleRedProj}[1]{\ottdrule[#1]{%
\ottpremise{i \, \in \, \ottsym{\{}  \ottsym{1}  \ottsym{,}  \ottsym{2}  \ottsym{\}}}%
}{
 \blue{ \pi_{ i } }   \blue{\langle}  \source{e}_{{\mathrm{1}}}  \blue{,}  \source{e}_{{\mathrm{2}}}  \blue{\rangle}    \longrightarrow  \source{e}_{\ottmv{i}}}{%
{\ottdrulename{RedProj}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 325 - 328
\newcommand{\ottdruleRedProjEv}[1]{\ottdrule[#1]{%
\ottpremise{i \, \in \, \ottsym{\{}  \ottsym{1}  \ottsym{,}  \ottsym{2}  \ottsym{\}}}%
}{
 \blue{ \pi_{ i } }   \blue{(}  \source{ep} \,  \blue{\langle}  \source{e}_{{\mathrm{1}}}  \blue{,}  \source{e}_{{\mathrm{2}}}  \blue{\rangle}   \blue{)}    \longrightarrow  \ottsym{(}   \ottkw{Proj}_{ i }  \source{ep}   \ottsym{)} \, \source{e}_{\ottmv{i}}}{%
{\ottdrulename{RedProjEv}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 329 - 332
\newcommand{\ottdruleRedProjFail}[1]{\ottdrule[#1]{%
\ottpremise{ \ottkw{Proj}_{ i }  \source{ep}  \, \ottkw{undefined}}%
}{
 \blue{ \pi_{ i } }   \blue{(}  \source{ep} \,  \blue{\langle}  \source{e}_{{\mathrm{1}}}  \blue{,}  \source{e}_{{\mathrm{2}}}  \blue{\rangle}   \blue{)}    \longrightarrow   \blue{ \ottkw{error} } }{%
{\ottdrulename{RedProjFail}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 334 - 336
\newcommand{\ottdruleRedAscr}[1]{\ottdrule[#1]{%
}{
\source{ep}_{{\mathrm{1}}} \,  \blue{(}  \source{ep}_{{\mathrm{2}}} \, \source{r}  \blue{)}   \longrightarrow  \ottsym{(}  \source{ep}_{{\mathrm{1}}}  \sqcap  \source{ep}_{{\mathrm{2}}}  \ottsym{)} \, \source{r}}{%
{\ottdrulename{RedAscr}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 337 - 340
\newcommand{\ottdruleRedAscrFail}[1]{\ottdrule[#1]{%
\ottpremise{\source{ep}_{{\mathrm{1}}}  \sqcap  \source{ep}_{{\mathrm{2}}} \, \ottkw{undefined}}%
}{
\source{ep}_{{\mathrm{1}}} \,  \blue{(}  \source{ep}_{{\mathrm{2}}} \, \source{r}  \blue{)}   \longrightarrow   \blue{ \ottkw{error} } }{%
{\ottdrulename{RedAscrFail}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 341 - 344
\newcommand{\ottdruleRedContext}[1]{\ottdrule[#1]{%
\ottpremise{\source{e}_{{\mathrm{1}}}  \longrightarrow  \source{e}_{{\mathrm{2}}}}%
}{
\ottnt{C}  \ottsym{[}  \source{e}_{{\mathrm{1}}}  \ottsym{]}  \longrightarrow  \ottnt{C}  \ottsym{[}  \source{e}_{{\mathrm{2}}}  \ottsym{]}}{%
{\ottdrulename{RedContext}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 345 - 348
\newcommand{\ottdruleRedContextFail}[1]{\ottdrule[#1]{%
\ottpremise{\source{e}  \longrightarrow   \blue{ \ottkw{error} } }%
}{
\ottnt{C}  \ottsym{[}  \source{e}  \ottsym{]}  \longrightarrow  \ottnt{C}  \ottsym{[}   \blue{ \ottkw{error} }   \ottsym{]}}{%
{\ottdrulename{RedContextFail}}{}%
}}

\newcommand{\ottdefnRed}[1]{\begin{ottdefnblock}[#1]{$\source{e}_{{\mathrm{1}}}  \longrightarrow  \source{e}_{{\mathrm{2}}}$}{\ottcom{Reduction Relation on terms}}
\ottusedrule{\ottdruleRedIfTrue{}}
\ottusedrule{\ottdruleRedIfFalse{}}
\ottusedrule{\ottdruleRedIfEv{}}
\ottusedrule{\ottdruleRedApp{}}
\ottusedrule{\ottdruleRedAppEv{}}
\ottusedrule{\ottdruleRedAppEvFail{}}
\ottusedrule{\ottdruleRedAppEvPartial{}}
\ottusedrule{\ottdruleRedAppEvPartialFail{}}
\ottusedrule{\ottdruleRedPlus{}}
\ottusedrule{\ottdruleRedPlusEvL{}}
\ottusedrule{\ottdruleRedPlusEvR{}}
\ottusedrule{\ottdruleRedEqT{}}
\ottusedrule{\ottdruleRedEqF{}}
\ottusedrule{\ottdruleRedEqEvL{}}
\ottusedrule{\ottdruleRedEqEvR{}}
\ottusedrule{\ottdruleRedProj{}}
\ottusedrule{\ottdruleRedProjEv{}}
\ottusedrule{\ottdruleRedProjFail{}}
\ottusedrule{\ottdruleRedAscr{}}
\ottusedrule{\ottdruleRedAscrFail{}}
\ottusedrule{\ottdruleRedContext{}}
\ottusedrule{\ottdruleRedContextFail{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsSemantics}{
\ottdefnRed{}}

% defns Types
%% defn Hastype

% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 361 - 364
\newcommand{\ottdruleHastypeVar}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{(}  \mathit{x}  \ottsym{:}  \source{T}  \ottsym{)} \, \in \, \blue{\Gamma}}%
}{
\blue{\Gamma}  \vdash   \blue{ \mathit{x} }   \ottsym{:}  \source{T}}{%
{\ottdrulename{HastypeVar}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 365 - 367
\newcommand{\ottdruleHastypeBool}[1]{\ottdrule[#1]{%
}{
\blue{\Gamma}  \vdash   \blue{ b }   \ottsym{:}   \blue{\mathsf{Bool} } }{%
{\ottdrulename{HastypeBool}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 368 - 370
\newcommand{\ottdruleHastypeNat}[1]{\ottdrule[#1]{%
}{
\blue{\Gamma}  \vdash   \blue{ \ottnt{n} }   \ottsym{:}   \blue{\mathsf{Nat} } }{%
{\ottdrulename{HastypeNat}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 371 - 375
\newcommand{\ottdruleHastypePlus}[1]{\ottdrule[#1]{%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{1}}}  \ottsym{:}   \blue{\mathsf{Nat} } }%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{2}}}  \ottsym{:}   \blue{\mathsf{Nat} } }%
}{
\blue{\Gamma}  \vdash   \source{e}_{{\mathrm{1}}}  \blue{\boldsymbol{+} }  \source{e}_{{\mathrm{2}}}   \ottsym{:}   \blue{\mathsf{Nat} } }{%
{\ottdrulename{HastypePlus}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 376 - 380
\newcommand{\ottdruleHastypeEq}[1]{\ottdrule[#1]{%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{1}}}  \ottsym{:}   \blue{\mathsf{Nat} } }%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{2}}}  \ottsym{:}   \blue{\mathsf{Nat} } }%
}{
\blue{\Gamma}  \vdash   \source{e}_{{\mathrm{1}}}  \blue{\stackrel{?}{=} }  \source{e}_{{\mathrm{2}}}   \ottsym{:}   \blue{\mathsf{Nat} } }{%
{\ottdrulename{HastypeEq}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 382 - 385
\newcommand{\ottdruleHastypeLam}[1]{\ottdrule[#1]{%
\ottpremise{\blue{\Gamma}  \ottsym{,}  \ottsym{(}  \mathit{x}  \ottsym{:}  \source{T}_{{\mathrm{1}}}  \ottsym{)}  \vdash  \source{e}  \ottsym{:}  \source{T}_{{\mathrm{2}}}}%
}{
\blue{\Gamma}  \vdash   \blue{\lambda  \mathit{x} }  \ldotp  \source{e}   \ottsym{:}   \source{T}_{{\mathrm{1}}} \blue{\to} \source{T}_{{\mathrm{2}}} }{%
{\ottdrulename{HastypeLam}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 386 - 390
\newcommand{\ottdruleHastypeApp}[1]{\ottdrule[#1]{%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{1}}}  \ottsym{:}   \source{T}_{{\mathrm{1}}} \blue{\to} \source{T}_{{\mathrm{2}}} }%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{2}}}  \ottsym{:}  \source{T}_{{\mathrm{1}}}}%
}{
\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{1}}} \, \source{e}_{{\mathrm{2}}}  \ottsym{:}  \source{T}_{{\mathrm{2}}}}{%
{\ottdrulename{HastypeApp}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 391 - 396
\newcommand{\ottdruleHastypeIf}[1]{\ottdrule[#1]{%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}  \ottsym{:}   \blue{\mathsf{Bool} } }%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{1}}}  \ottsym{:}  \source{T}}%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{2}}}  \ottsym{:}  \source{T}}%
}{
\blue{\Gamma}  \vdash   \blue{\ottkw{if} }\  \source{e} \ \blue{\ottkw{then} }\  \source{e}_{{\mathrm{1}}} \ \blue{\ottkw{else} }\  \source{e}_{{\mathrm{2}}}   \ottsym{:}  \source{T}}{%
{\ottdrulename{HastypeIf}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 398 - 402
\newcommand{\ottdruleHastypePair}[1]{\ottdrule[#1]{%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{1}}}  \ottsym{:}  \source{T}_{{\mathrm{1}}}}%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}_{{\mathrm{2}}}  \ottsym{:}  \source{T}_{{\mathrm{2}}}}%
}{
\blue{\Gamma}  \vdash   \blue{\langle}  \source{e}_{{\mathrm{1}}}  \blue{,}  \source{e}_{{\mathrm{2}}}  \blue{\rangle}   \ottsym{:}   \source{T}_{{\mathrm{1}}} \blue{\times} \source{T}_{{\mathrm{2}}} }{%
{\ottdrulename{HastypePair}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 403 - 407
\newcommand{\ottdruleHastypeProj}[1]{\ottdrule[#1]{%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}  \ottsym{:}   \source{T}_{{\mathrm{1}}} \blue{\times} \source{T}_{{\mathrm{2}}} }%
\ottpremise{i \, \in \, \ottsym{\{}  \ottsym{1}  \ottsym{,}  \ottsym{2}  \ottsym{\}}}%
}{
\blue{\Gamma}  \vdash    \blue{ \mathtt{ p } }  _\black{ i }  \, \source{e}  \ottsym{:}  \source{T}}{%
{\ottdrulename{HastypeProj}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 409 - 413
\newcommand{\ottdruleHastypeAscr}[1]{\ottdrule[#1]{%
\ottpremise{\blue{\Gamma}  \vdash  \source{e}  \ottsym{:}  \source{T}_{{\mathrm{2}}}}%
\ottpremise{\source{ep}  \vdash  \source{T}_{{\mathrm{1}}}  \cong  \source{T}_{{\mathrm{2}}}}%
}{
\blue{\Gamma}  \vdash  \source{ep} \, \source{e}  \ottsym{:}  \source{T}_{{\mathrm{1}}}}{%
{\ottdrulename{HastypeAscr}}{}%
}}

\newcommand{\ottdefnHastype}[1]{\begin{ottdefnblock}[#1]{$\blue{\Gamma}  \vdash  \source{e}  \ottsym{:}  \source{T}$}{\ottcom{Typability relation}}
\ottusedrule{\ottdruleHastypeVar{}}
\ottusedrule{\ottdruleHastypeBool{}}
\ottusedrule{\ottdruleHastypeNat{}}
\ottusedrule{\ottdruleHastypePlus{}}
\ottusedrule{\ottdruleHastypeEq{}}
\ottusedrule{\ottdruleHastypeLam{}}
\ottusedrule{\ottdruleHastypeApp{}}
\ottusedrule{\ottdruleHastypeIf{}}
\ottusedrule{\ottdruleHastypePair{}}
\ottusedrule{\ottdruleHastypeProj{}}
\ottusedrule{\ottdruleHastypeAscr{}}
\end{ottdefnblock}}

%% defn Consistent

% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 418 - 422
\newcommand{\ottdruleConsistentEv}[1]{\ottdrule[#1]{%
\ottpremise{ \source{T}_{{\mathrm{3}}}  \sqcap  \source{T}_{{\mathrm{1}}}  =  \source{T}_{{\mathrm{3}}} }%
\ottpremise{ \source{T}_{{\mathrm{3}}}  \sqcap  \source{T}_{{\mathrm{2}}}  =  \source{T}_{{\mathrm{3}}} }%
}{
 \{  \source{T}_{{\mathrm{3}}}  \}   \vdash  \source{T}_{{\mathrm{1}}}  \cong  \source{T}_{{\mathrm{2}}}}{%
{\ottdrulename{ConsistentEv}}{}%
}}

\newcommand{\ottdefnConsistent}[1]{\begin{ottdefnblock}[#1]{$\source{ep}  \vdash  \source{T}_{{\mathrm{1}}}  \cong  \source{T}_{{\mathrm{2}}}$}{\ottcom{Type Consistency relative to Evidence}}
\ottusedrule{\ottdruleConsistentEv{}}
\end{ottdefnblock}}

%% defn Meet

% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 427 - 429
\newcommand{\ottdruleMeetDynL}[1]{\ottdrule[#1]{%
}{
  \blue{?}   \sqcap  \source{T}  =  \source{T} }{%
{\ottdrulename{MeetDynL}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 430 - 432
\newcommand{\ottdruleMeetDynR}[1]{\ottdrule[#1]{%
}{
 \source{T}  \sqcap   \blue{?}   =  \source{T} }{%
{\ottdrulename{MeetDynR}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 433 - 435
\newcommand{\ottdruleMeetRefl}[1]{\ottdrule[#1]{%
}{
 \source{T}  \sqcap  \source{T}  =  \source{T} }{%
{\ottdrulename{MeetRefl}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 436 - 440
\newcommand{\ottdruleMeetFun}[1]{\ottdrule[#1]{%
\ottpremise{ \source{T}_{{\mathrm{1}}}  \sqcap  \source{T}'_{{\mathrm{1}}}  =  \source{T}''_{{\mathrm{1}}} }%
\ottpremise{ \source{T}_{{\mathrm{2}}}  \sqcap  \source{T}'_{{\mathrm{2}}}  =  \source{T}''_{{\mathrm{2}}} }%
}{
  \source{T}_{{\mathrm{1}}} \blue{\to} \source{T}_{{\mathrm{2}}}   \sqcap   \source{T}'_{{\mathrm{1}}} \blue{\to} \source{T}'_{{\mathrm{2}}}   =   \source{T}''_{{\mathrm{1}}} \blue{\to} \source{T}''_{{\mathrm{2}}}  }{%
{\ottdrulename{MeetFun}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 441 - 445
\newcommand{\ottdruleMeetProd}[1]{\ottdrule[#1]{%
\ottpremise{ \source{T}_{{\mathrm{1}}}  \sqcap  \source{T}'_{{\mathrm{1}}}  =  \source{T}''_{{\mathrm{1}}} }%
\ottpremise{ \source{T}_{{\mathrm{2}}}  \sqcap  \source{T}'_{{\mathrm{2}}}  =  \source{T}''_{{\mathrm{2}}} }%
}{
  \source{T}_{{\mathrm{1}}} \blue{\times} \source{T}_{{\mathrm{2}}}   \sqcap   \source{T}'_{{\mathrm{1}}} \blue{\times} \source{T}'_{{\mathrm{2}}}   =   \source{T}''_{{\mathrm{1}}} \blue{\times} \source{T}''_{{\mathrm{2}}}  }{%
{\ottdrulename{MeetProd}}{}%
}}

\newcommand{\ottdefnMeet}[1]{\begin{ottdefnblock}[#1]{$ \source{T}_{{\mathrm{1}}}  \sqcap  \source{T}_{{\mathrm{2}}}  =  \source{T}_{{\mathrm{3}}} $}{\ottcom{Precision Meet}}
\ottusedrule{\ottdruleMeetDynL{}}
\ottusedrule{\ottdruleMeetDynR{}}
\ottusedrule{\ottdruleMeetRefl{}}
\ottusedrule{\ottdruleMeetFun{}}
\ottusedrule{\ottdruleMeetProd{}}
\end{ottdefnblock}}

%% defn ValTransform

% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 451 - 453
\newcommand{\ottdruleValTransformBool}[1]{\ottdrule[#1]{%
}{
 \mathcal{V}\llbracket   \blue{ b }   \rrbracket =   \langle   \mathtt{ DYN }  ,  b \rangle  }{%
{\ottdrulename{ValTransformBool}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 455 - 457
\newcommand{\ottdruleValTransformNum}[1]{\ottdrule[#1]{%
}{
 \mathcal{V}\llbracket   \blue{ \ottnt{n} }   \rrbracket =   \langle   \mathtt{ DYN }  ,  \ottnt{n} \rangle  }{%
{\ottdrulename{ValTransformNum}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 458 - 461
\newcommand{\ottdruleValTransformFun}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{E}\llbracket  \source{e}  \rrbracket  \mathit{c}  =  \ottnt{t} }%
}{
 \mathcal{V}\llbracket   \blue{\lambda  \mathit{x} }  \ldotp  \source{e}   \rrbracket =   \langle   \mathtt{ DYN }  ,   \red{\lambda  \mathit{x} \, \mathit{c} }\ldotp  \ottnt{t}  \rangle  }{%
{\ottdrulename{ValTransformFun}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 463 - 465
\newcommand{\ottdruleValTransformPair}[1]{\ottdrule[#1]{%
}{
 \mathcal{V}\llbracket   \blue{\langle}  \source{v}_{{\mathrm{1}}}  \blue{,}  \source{v}_{{\mathrm{2}}}  \blue{\rangle}   \rrbracket =   \langle   \mathtt{ DYN }  ,   \langle   \mathcal{V}\llbracket  \source{v}_{{\mathrm{1}}}  \rrbracket  ,   \mathcal{V}\llbracket  \source{v}_{{\mathrm{2}}}  \rrbracket  \rangle  \rangle  }{%
{\ottdrulename{ValTransformPair}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 466 - 469
\newcommand{\ottdruleValTransformEv}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{V}\llbracket  \source{r}  \rrbracket =   \langle   \mathtt{ DYN }  ,  \Ltarget{u} \rangle  }%
}{
 \mathcal{V}\llbracket  \source{ep} \, \source{r}  \rrbracket =   \langle   \mathcal{T}\llbracket  \source{ep}  \rrbracket  ,  \Ltarget{u} \rangle  }{%
{\ottdrulename{ValTransformEv}}{}%
}}

\newcommand{\ottdefnValTransform}[1]{\begin{ottdefnblock}[#1]{$ \mathcal{V}\llbracket  \source{v}  \rrbracket =  \Ltarget{u} $}{\ottcom{CPS Translation of Closed Values}}
\ottusedrule{\ottdruleValTransformBool{}}
\ottusedrule{\ottdruleValTransformNum{}}
\ottusedrule{\ottdruleValTransformFun{}}
\ottusedrule{\ottdruleValTransformPair{}}
\ottusedrule{\ottdruleValTransformEv{}}
\end{ottdefnblock}}

%% defn Transform

% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 474 - 476
\newcommand{\ottdruleTransformVar}[1]{\ottdrule[#1]{%
}{
 \mathcal{E}\llbracket   \blue{ \mathit{x} }   \rrbracket  \Ltarget{k}  =   \Ltarget{k} ( \mathit{x} )  }{%
{\ottdrulename{TransformVar}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 477 - 479
\newcommand{\ottdruleTransformBool}[1]{\ottdrule[#1]{%
}{
 \mathcal{E}\llbracket   \blue{ b }   \rrbracket  \Ltarget{k}  =   \Ltarget{k} (  \langle   \mathtt{ DYN }  ,  b \rangle  )  }{%
{\ottdrulename{TransformBool}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 481 - 483
\newcommand{\ottdruleTransformNum}[1]{\ottdrule[#1]{%
}{
 \mathcal{E}\llbracket   \blue{ \ottnt{n} }   \rrbracket  \Ltarget{k}  =   \Ltarget{k} (  \langle   \mathtt{ DYN }  ,  \ottnt{n} \rangle  )  }{%
{\ottdrulename{TransformNum}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 484 - 487
\newcommand{\ottdruleTransformFun}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{E}\llbracket  \source{e}  \rrbracket  \mathit{c}  =  \ottnt{t} }%
}{
 \mathcal{E}\llbracket   \blue{(}   \blue{\lambda  \mathit{x} }  \ldotp  \source{e}   \blue{)}   \rrbracket  \Ltarget{k}  =   \Ltarget{k} (  \langle   \mathtt{ DYN }  ,   \red{\lambda  \mathit{x} \, \mathit{c} }\ldotp  \ottnt{t}  \rangle  )  }{%
{\ottdrulename{TransformFun}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 488 - 495
\newcommand{\ottdruleTransformApp}[1]{\ottdrule[#1]{%
\ottpremise{\Ltarget{k}_{{\mathrm{1}}}  \ottsym{:=}  \ottsym{(}   \red{\lambda  \mathit{x_{{\mathrm{2}}}} }\ldotp  \ottkw{let} \, \mathit{y_{{\mathrm{1}}}}  \ottsym{:=}  \pi_1  \mathit{x_{{\mathrm{1}}}} \, \ottkw{in} \, \ottkw{let} \, \mathit{z_{{\mathrm{1}}}}  \ottsym{:=}  \pi_2  \mathit{x_{{\mathrm{1}}}} \, \ottkw{in} \, \ottkw{let} \, \mathit{y_{{\mathrm{2}}}}  \ottsym{:=}  \pi_1  \mathit{x_{{\mathrm{2}}}} \, \ottkw{in} \, \ottkw{let} \, \mathit{z_{{\mathrm{2}}}}  \ottsym{:=}  \pi_2  \mathit{x_{{\mathrm{2}}}} \, \ottkw{in} \, \ottnt{t_{{\mathrm{1}}}}   \ottsym{)}}%
\ottpremise{\ottnt{t_{{\mathrm{1}}}}  \ottsym{:=}    \mathtt{DOM }  ( \mathit{y_{{\mathrm{1}}}}  \ottsym{,}   \red{\lambda  \mathit{y'_{{\mathrm{1}}}} }\ldotp    \mathtt{COD }  ( \mathit{y_{{\mathrm{1}}}}  \ottsym{,}   \red{\lambda  \mathit{y''_{{\mathrm{1}}}} }\ldotp    \mathtt{MEET }  ( \mathit{y'_{{\mathrm{1}}}}  \ottsym{,}  \mathit{y_{{\mathrm{2}}}}  \ottsym{,}  \ottsym{(}   \red{\lambda  \mathit{y_{{\mathrm{3}}}} }\ldotp   \mathit{z_{{\mathrm{1}}}} (  \langle  \mathit{y_{{\mathrm{3}}}} ,  \mathit{z_{{\mathrm{2}}}} \rangle   \ottsym{,}  \ottsym{(}   \red{\lambda  \mathit{z_{{\mathrm{3}}}} }\ldotp  \ottnt{t_{{\mathrm{2}}}}   \ottsym{)} )    \ottsym{)} )   )   ) }%
\ottpremise{\ottnt{t_{{\mathrm{2}}}}  \ottsym{:=}  \ottkw{let} \, \mathit{z'_{{\mathrm{3}}}}  \ottsym{:=}  \pi_1  \mathit{z_{{\mathrm{3}}}} \, \ottkw{in} \, \ottkw{let} \, \mathit{z''_{{\mathrm{3}}}}  \ottsym{:=}  \pi_2  \mathit{z_{{\mathrm{3}}}} \, \ottkw{in} \,   \mathtt{MEET }  ( \mathit{y''_{{\mathrm{1}}}}  \ottsym{,}  \mathit{z'_{{\mathrm{3}}}}  \ottsym{,}  \ottsym{(}   \red{\lambda  \mathit{z_{{\mathrm{4}}}} }\ldotp   \Ltarget{k} (  \langle  \mathit{z_{{\mathrm{4}}}} ,  \mathit{z''_{{\mathrm{3}}}} \rangle  )    \ottsym{)} ) }%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{2}}}  \rrbracket  \Ltarget{k}_{{\mathrm{1}}}  =  \ottnt{t'} }%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{1}}}  \rrbracket  \ottsym{(}   \red{\lambda  \mathit{x_{{\mathrm{1}}}} }\ldotp  \ottnt{t'}   \ottsym{)}  =  \ottnt{t} }%
}{
 \mathcal{E}\llbracket  \source{e}_{{\mathrm{1}}} \, \source{e}_{{\mathrm{2}}}  \rrbracket  \Ltarget{k}  =  \ottnt{t} }{%
{\ottdrulename{TransformApp}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 496 - 501
\newcommand{\ottdruleTransformPlus}[1]{\ottdrule[#1]{%
\ottpremise{\Ltarget{k}_{{\mathrm{1}}}  \ottsym{:=}  \ottsym{(}   \red{\lambda  \mathit{x_{{\mathrm{2}}}} }\ldotp  \ottkw{let} \, \mathit{z_{{\mathrm{1}}}}  \ottsym{:=}  \pi_2  \mathit{x_{{\mathrm{1}}}} \, \ottkw{in} \, \ottkw{let} \, \mathit{z_{{\mathrm{2}}}}  \ottsym{:=}  \pi_2  \mathit{x_{{\mathrm{2}}}} \, \ottkw{in} \, \ottkw{let} \, \mathit{z_{{\mathrm{3}}}}  \ottsym{:=}  \mathit{z_{{\mathrm{1}}}}  \ottsym{+}  \mathit{z_{{\mathrm{2}}}} \, \ottkw{in} \,  \Ltarget{k} ( \mathit{z_{{\mathrm{3}}}} )    \ottsym{)}}%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{2}}}  \rrbracket  \Ltarget{k}_{{\mathrm{1}}}  =  \ottnt{t'} }%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{1}}}  \rrbracket  \ottsym{(}   \red{\lambda  \mathit{x_{{\mathrm{1}}}} }\ldotp  \ottnt{t'}   \ottsym{)}  =  \ottnt{t} }%
}{
 \mathcal{E}\llbracket   \source{e}_{{\mathrm{1}}}  \blue{\boldsymbol{+} }  \source{e}_{{\mathrm{2}}}   \rrbracket  \Ltarget{k}  =  \ottnt{t} }{%
{\ottdrulename{TransformPlus}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 502 - 507
\newcommand{\ottdruleTransformEq}[1]{\ottdrule[#1]{%
\ottpremise{\Ltarget{k}_{{\mathrm{1}}}  \ottsym{:=}  \ottsym{(}   \red{\lambda  \mathit{x_{{\mathrm{2}}}} }\ldotp  \ottkw{let} \, \mathit{z_{{\mathrm{1}}}}  \ottsym{:=}  \pi_2  \mathit{x_{{\mathrm{1}}}} \, \ottkw{in} \, \ottkw{let} \, \mathit{z_{{\mathrm{2}}}}  \ottsym{:=}  \pi_2  \mathit{x_{{\mathrm{2}}}} \, \ottkw{in} \, \ottkw{let} \, \mathit{z_{{\mathrm{3}}}}  \ottsym{:=}  \mathit{z_{{\mathrm{1}}}}  \stackrel{?}{=}  \mathit{z_{{\mathrm{2}}}} \, \ottkw{in} \,  \Ltarget{k} ( \mathit{z_{{\mathrm{3}}}} )    \ottsym{)}}%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{2}}}  \rrbracket  \Ltarget{k}_{{\mathrm{1}}}  =  \ottnt{t'} }%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{1}}}  \rrbracket  \ottsym{(}   \red{\lambda  \mathit{x_{{\mathrm{1}}}} }\ldotp  \ottnt{t'}   \ottsym{)}  =  \ottnt{t} }%
}{
 \mathcal{E}\llbracket   \source{e}_{{\mathrm{1}}}  \blue{\boldsymbol{+} }  \source{e}_{{\mathrm{2}}}   \rrbracket  \Ltarget{k}  =  \ottnt{t} }{%
{\ottdrulename{TransformEq}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 508 - 512
\newcommand{\ottdruleTransformPair}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{2}}}  \rrbracket  \ottsym{(}   \red{\lambda  \mathit{x_{{\mathrm{2}}}} }\ldotp   \Ltarget{k} (  \langle   \mathtt{ DYN }  ,   \langle  \mathit{x_{{\mathrm{1}}}} ,  \mathit{x_{{\mathrm{2}}}} \rangle  \rangle  )    \ottsym{)}  =  \ottnt{t'} }%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{1}}}  \rrbracket  \ottsym{(}   \red{\lambda  \mathit{x_{{\mathrm{1}}}} }\ldotp  \ottnt{t'}   \ottsym{)}  =  \ottnt{t} }%
}{
 \mathcal{E}\llbracket   \blue{\langle}  \source{e}_{{\mathrm{1}}}  \blue{,}  \source{e}_{{\mathrm{2}}}  \blue{\rangle}   \rrbracket  \Ltarget{k}  =  \ottnt{t} }{%
{\ottdrulename{TransformPair}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 513 - 518
\newcommand{\ottdruleTransformIf}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{1}}}  \rrbracket  \Ltarget{k}  =  \ottnt{t_{{\mathrm{1}}}} }%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{2}}}  \rrbracket  \Ltarget{k}  =  \ottnt{t_{{\mathrm{2}}}} }%
\ottpremise{ \mathcal{E}\llbracket  \source{e}_{{\mathrm{0}}}  \rrbracket  \ottsym{(}   \red{\lambda  \mathit{x_{{\mathrm{0}}}} }\ldotp  \ottkw{let} \, \mathit{x}  \ottsym{:=}  \pi_2  \mathit{x_{{\mathrm{0}}}} \, \ottkw{in} \,  \ottkw{ if }\  \mathit{x} \ \ottkw{ then }\  \ottnt{t_{{\mathrm{1}}}} \ \ottkw{ else }\  \ottnt{t_{{\mathrm{2}}}}    \ottsym{)}  =  \ottnt{t} }%
}{
 \mathcal{E}\llbracket   \blue{\ottkw{if} }\  \source{e}_{{\mathrm{0}}} \ \blue{\ottkw{then} }\  \source{e}_{{\mathrm{1}}} \ \blue{\ottkw{else} }\  \source{e}_{{\mathrm{2}}}   \rrbracket  \Ltarget{k}  =  \ottnt{t} }{%
{\ottdrulename{TransformIf}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 519 - 523
\newcommand{\ottdruleTransformProj}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{E}\llbracket  \source{e}  \rrbracket  \ottsym{(}   \red{\lambda  \mathit{x} }\ldotp  \ottkw{let} \, \mathit{y_{{\mathrm{1}}}}  \ottsym{:=}  \pi_1  \mathit{x} \, \ottkw{in} \, \ottkw{let} \, \mathit{y_{{\mathrm{2}}}}  \ottsym{:=}  \pi_2  \mathit{x} \, \ottkw{in} \,   \mathtt{PROD}_{ i }  ( \mathit{y_{{\mathrm{1}}}}  \ottsym{,}  \Ltarget{k}' )    \ottsym{)}  =  \ottnt{t} }%
\ottpremise{\Ltarget{k}'  \ottsym{:=}  \ottsym{(}   \red{\lambda  \mathit{z_{{\mathrm{1}}}} }\ldotp  \ottkw{let} \,  \mathit{z_{{\mathrm{2}}}}  := \pi_{ i }\  \mathit{y}  \, \ottkw{in} \, \ottkw{let} \, \mathit{z_{{\mathrm{21}}}}  \ottsym{:=}  \pi_1  \mathit{z_{{\mathrm{2}}}} \, \ottkw{in} \, \ottkw{let} \, \mathit{z_{{\mathrm{22}}}}  \ottsym{:=}  \pi_2  \mathit{z_{{\mathrm{2}}}} \, \ottkw{in} \,   \mathtt{MEET }  ( \mathit{z_{{\mathrm{1}}}}  \ottsym{,}  \mathit{z_{{\mathrm{21}}}}  \ottsym{,}  \ottsym{(}   \red{\lambda  \mathit{z'_{{\mathrm{1}}}} }\ldotp   \Ltarget{k} (  \langle  \mathit{z'_{{\mathrm{1}}}} ,  \mathit{z_{{\mathrm{22}}}} \rangle  )    \ottsym{)} )    \ottsym{)}}%
}{
 \mathcal{E}\llbracket   \blue{ \pi_{ i } }  \source{e}   \rrbracket  \Ltarget{k}  =  \ottnt{t} }{%
{\ottdrulename{TransformProj}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 524 - 527
\newcommand{\ottdruleTransformEv}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{E}\llbracket  \source{e}  \rrbracket  \ottsym{(}   \red{\lambda  \mathit{x} }\ldotp  \ottkw{let} \, \mathit{x_{{\mathrm{1}}}}  \ottsym{:=}  \pi_1  \mathit{x} \, \ottkw{in} \, \ottkw{let} \, \mathit{x_{{\mathrm{2}}}}  \ottsym{:=}  \pi_2  \mathit{x} \, \ottkw{in} \,   \mathtt{MEET }  (  \mathcal{T}\llbracket  \source{ep}  \rrbracket   \ottsym{,}  \mathit{x_{{\mathrm{1}}}}  \ottsym{,}  \ottsym{(}   \red{\lambda  \mathit{y} }\ldotp   \Ltarget{k} (  \langle  \mathit{y} ,  \mathit{x_{{\mathrm{2}}}} \rangle  )    \ottsym{)} )    \ottsym{)}  =  \ottnt{t} }%
}{
 \mathcal{E}\llbracket  \source{ep} \, \source{e}  \rrbracket  \Ltarget{k}  =  \ottnt{t} }{%
{\ottdrulename{TransformEv}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 528 - 530
\newcommand{\ottdruleTransformErr}[1]{\ottdrule[#1]{%
}{
 \mathcal{E}\llbracket   \blue{ \ottkw{error} }   \rrbracket  \Ltarget{k}  =  \ottkw{error} }{%
{\ottdrulename{TransformErr}}{}%
}}

\newcommand{\ottdefnTransform}[1]{\begin{ottdefnblock}[#1]{$ \mathcal{E}\llbracket  \source{e}  \rrbracket  \Ltarget{k}  =  \ottnt{t} $}{\ottcom{CPS Translation of Expressions}}
\ottusedrule{\ottdruleTransformVar{}}
\ottusedrule{\ottdruleTransformBool{}}
\ottusedrule{\ottdruleTransformNum{}}
\ottusedrule{\ottdruleTransformFun{}}
\ottusedrule{\ottdruleTransformApp{}}
\ottusedrule{\ottdruleTransformPlus{}}
\ottusedrule{\ottdruleTransformEq{}}
\ottusedrule{\ottdruleTransformPair{}}
\ottusedrule{\ottdruleTransformIf{}}
\ottusedrule{\ottdruleTransformProj{}}
\ottusedrule{\ottdruleTransformEv{}}
\ottusedrule{\ottdruleTransformErr{}}
\end{ottdefnblock}}

%% defn EvTransform

% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 535 - 537
\newcommand{\ottdruleEvTransformBool}[1]{\ottdrule[#1]{%
}{
 \mathcal{T}\llbracket   \{   \blue{\mathsf{Bool} }   \}   \rrbracket =   \langle   \mathtt{BOOL }  ,  \ottsym{0} \rangle  }{%
{\ottdrulename{EvTransformBool}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 538 - 540
\newcommand{\ottdruleEvTransformNat}[1]{\ottdrule[#1]{%
}{
 \mathcal{T}\llbracket   \{   \blue{\mathsf{Nat} }   \}   \rrbracket =   \langle   \mathtt{NAT }  ,  \ottsym{0} \rangle  }{%
{\ottdrulename{EvTransformNat}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 541 - 543
\newcommand{\ottdruleEvTransformDyn}[1]{\ottdrule[#1]{%
}{
 \mathcal{T}\llbracket   \{   \blue{?}   \}   \rrbracket =   \langle   \mathtt{ DYN }  ,  \ottsym{0} \rangle  }{%
{\ottdrulename{EvTransformDyn}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 544 - 546
\newcommand{\ottdruleEvTransformArr}[1]{\ottdrule[#1]{%
}{
 \mathcal{T}\llbracket   \{   \source{T}_{{\mathrm{1}}} \blue{\to} \source{T}_{{\mathrm{2}}}   \}   \rrbracket =   \langle   \mathtt{ARROW }  ,   \langle   \mathcal{T}\llbracket   \{  \source{T}_{{\mathrm{1}}}  \}   \rrbracket  ,   \mathcal{T}\llbracket   \{  \source{T}_{{\mathrm{2}}}  \}   \rrbracket  \rangle  \rangle  }{%
{\ottdrulename{EvTransformArr}}{}%
}}



% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 547 - 549
\newcommand{\ottdruleEvTransformProd}[1]{\ottdrule[#1]{%
}{
 \mathcal{T}\llbracket   \{   \source{T}_{{\mathrm{1}}} \blue{\to} \source{T}_{{\mathrm{2}}}   \}   \rrbracket =   \langle   \mathtt{PRODUCT }  ,   \langle   \mathcal{T}\llbracket   \{  \source{T}_{{\mathrm{1}}}  \}   \rrbracket  ,   \mathcal{T}\llbracket   \{  \source{T}_{{\mathrm{2}}}  \}   \rrbracket  \rangle  \rangle  }{%
{\ottdrulename{EvTransformProd}}{}%
}}

\newcommand{\ottdefnEvTransform}[1]{\begin{ottdefnblock}[#1]{$ \mathcal{T}\llbracket  \source{ep}  \rrbracket =  \Ltarget{u} $}{\ottcom{CPS Representation of Runtime Evidence}}
\ottusedrule{\ottdruleEvTransformBool{}}
\ottusedrule{\ottdruleEvTransformNat{}}
\ottusedrule{\ottdruleEvTransformDyn{}}
\ottusedrule{\ottdruleEvTransformArr{}}
\ottusedrule{\ottdruleEvTransformProd{}}
\end{ottdefnblock}}

%% defn KStep

\newcommand{\ottdefnKStep}[1]{\begin{ottdefnblock}[#1]{$\ottnt{t_{{\mathrm{1}}}}  {\longrightarrow^{*} }  \ottnt{t_{{\mathrm{2}}}}$}{}
\end{ottdefnblock}}


\newcommand{\ottdefnsTypes}{
\ottdefnHastype{}\ottdefnConsistent{}\ottdefnMeet{}\ottdefnValTransform{}\ottdefnTransform{}\ottdefnEvTransform{}\ottdefnKStep{}}

\newcommand{\ottdefnss}{
\ottdefnsSemantics
\ottdefnsTypes
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 5 - 17
% #source file /home/joey/UBC/539B/project/GTFL.ott  lines 28 - 34





\ottdefnss

\ottdefnss}

\begin{document}
\ottall

\begin{verbatim}
Definition rules:        61 good    0 bad
Definition rule clauses: 120 good    0 bad
\end{verbatim}
\end{document}
